<div>
  <app-task-form
    (onSubmitTask)="CreateTask($event)"
  ></app-task-form>
</div>

<div class="flex flex-col">
  @for (task of tasks(); track $index) {
    <app-tasks-item
      [task]="task"
      [categories]="categories()"
      [index]="$index"
      [isLast]="tasks().length - 1 === $index"
      (onDeleteTask)="DeleteTask($event)"
      (onChangeTask)="ChangeTask($event)"
      (onEditTask)="EditTask($event)"
    >
      @for (subtask of task.subtasks; track $index) {
        <div class="flex hover:bg-lightDark/40">
          @if ($index === task.subtasks.length - 1) {
            <span>&nbsp;└──</span>
          }
          @else {
            <span>&nbsp;├──</span>
          }
          <app-task-item
            [task]="subtask"
            [index]="$index"
            [categories]="categories()"
            (onDeleteTask)="DeleteTask($event)"
            (onChangeTask)="ChangeTask($event)"
          ></app-task-item>
        </div>
      }
    </app-tasks-item>
  }
</div>
